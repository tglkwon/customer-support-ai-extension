# customer-support-ai-extension

---
### 작업 기록

#### v0.4.0: Vertex AI 모델 연동 트러블슈팅 재튜닝
```
fix(model): Vertex AI 모델 연동 오류 해결 및 재튜닝

- 튜닝된 모델 연동 과정에서 발생한 `400`, `403`, `404` 오류를 해결하기 위한 집중적인 트러블슈팅을 진행함.
- **문제 원인 규명:**
  - **리전 불일치:** API 호출 리전과 모델이 실제 위치한 리전이 달라 발생한 문제.
  - **권한 부족:** `gemini-1.5-flash` 모델을 사용하기 위한 프로젝트 사전 승인(allowlist)이 누락됨.
  - **잘못된 모델 ID 및 SDK 사용법:** 초기 단계에서 부정확한 모델 ID를 사용하고, 튜닝된 모델에 맞지 않는 SDK 클래스(`aiplatform.Endpoint`)를 시도하는 등 여러 시행착오를 겪음.
- **해결 조치:**
  - `TROUBLESHOOTING.md` 파일을 생성하여 모든 오류의 원인과 해결 과정을 상세히 기록함.
  - 권한 문제가 없고 안정적인 **`gemini-1.0-pro-002`** 모델을 기반으로, **`us-central1`** 리전에서 새로운 모델(`customer-support-ai-v2-stable`) 튜닝을 시작함.
- **프론트엔드 개선:**
  - `App.js`를 리팩토링하여 API 요청 시 모델이 학습한 형식과 동일한 프롬프트를 생성하도록 수정.
  - 초기 UI를 개선하고 '예시 프롬프트 채우기' 기능을 복원하여 사용자 경험을 향상시킴.
```

#### v0.3.0: API 서버 및 프론트엔드 연동을 위한 전체 시스템 구축
```
feat(system): API 서버 및 프론트엔드 연동을 위한 전체 시스템 구축

- 데이터 파이프라인 개선:
  - Jupyter Notebook을 Python 스크립트(`.py`)로 변환.
  - 데이터 처리 스크립트(`1_data_processing.py`) 리팩토링:
    - 불필요한 데이터(리뷰 없는 행, 제목/링크 열) 제거 로직 추가.
    - Vertex AI 튜닝을 위해 출력 형식을 CSV에서 JSONL로 변경.

- 백엔드 API 서버 구축:
  - FastAPI를 사용하여 Vertex AI 모델을 호출하는 API 서버(`api_server.py`) 생성.
  - React 프론트엔드와 통신을 위한 CORS 설정 포함.

- 프론트엔드 UI 구현:
  - API 서버와 연동할 수 있도록 React 앱(`extension/src/App.js`) 재구성.
  - `axios`를 사용한 비동기 API 호출 로직 추가.
  - 리뷰 입력, 답변 생성 버튼, 결과 표시 등 전체 UI 구현.

- 프로젝트 계획 업데이트:
  - 모델 튜닝 계획을 Google AI Studio에서 Vertex AI로 공식화하고 README.md에 반영.
```

#### v0.2.0: AI 학습 데이터셋 구축 및 데이터 파이프라인 정제
```
feat(data): AI 학습 데이터셋 생성 및 파이프라인 정제

- 노트북 구조 리팩토링:
  - 기존 3개의 노트북(탐색, 튜닝, 생성)을 역할에 따라 2개(데이터 처리, 모델링 계획)로 ��구성하여 파이프라인의 명확성을 높임.
  - `1_data_processing.ipynb`: 데이터 탐색, 전처리, 학습셋 생성을 통합.
  - `2_modelling_plan.ipynb`: 생성된 학습셋을 검증하고 향후 모델링 계획을 수립.

- 데이터 처리 파이프라인 개선:
  - `integrate_data.py`: 여러 CSV를 통합하는 역할에만 집중하도록 수정 (데이터 필터링 기능 제거).
  - `1_data_processing.ipynb`: 데이터 정제(답변 없는 리뷰 제거 등) 로직을 담당하도록 역할을 명확히 함.

- 학습 데이터셋 생성 완료:
  - 수정된 파이프라인을 실행하여 606개의 유효한 'prompt/completion' 쌍으로 구성된 `training_data.csv` 파일 생성을 완료함.
  - 이로써 AI 모델 파인튜닝을 위한 데이터 준비(Phase 1, Part 3)를 마침.
```

---
### 다음 단계 (Next Steps)

1.  **새 모델 튜닝 완료 및 최종 연동**
    -   `us-central1` 리전에서 진행 중인 `gemini-2.0-flash-lite-001` 기반 모델의 튜닝이 완료되기를 기다립니다.
    -   튜닝이 완료되면, 생성된 새 모델 ID와 리전 정보를 `api_server.py`에 최종적으로 반영합니다.
    -   로컬 환경에서 'AI 답변 생성' 기능이 완벽하게 동작하는지 최종 검증합니다.

2.  **브라우저 확장 프로그램 빌드 및 테스트**
    -   모든 기능이 정상적으로 작동하면, `extension` 디렉터리에서 `npm run build` 명령어로 실제 브라우저 확장 프로그램을 빌드합니다.
    -   빌드된 `extension/build` 폴더를 브라우저에 로드하여 실제 환경에서 최종 테스트를 완료합니다.

